{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from 'axios';\n\n\nconst gallery = document.querySelector('.container');\nconst inputValue = document.getElementById('search-input');\nconst searchButton = document.getElementById('search-button');\nconst loadmorebtn = document.querySelector(\".load-more-btn\");\n\n\nconst loadingDiv = document.createElement('span');\nloadingDiv.className = 'loader';\n//loadingDiv.textContent = 'Loading images, please wait...';\n\nlet sayfa = 1;\nlet perPage = 40;\nlet totalImages = 0;\n\nloadmorebtn.style.display = \"none\";\n\nsearchButton.addEventListener(\"click\", async (e) => {\n    loadmorebtn.style.display = \"block\";\n\n    gallery.parentNode.insertBefore(loadingDiv, gallery); // Loading div'ini resultsDiv'in önüne ekle\n\n    delay(90000);\n\n    e.preventDefault();\n\n    \n    gallery.innerHTML = '';\n    totalImages = 0;\n  \n    await fetch().then((data) => {\n        totalImages += data.hits.length;\n\n        if (data.hits.length === 0) {\n            iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: 'topRight',\n            })\n\n            loadmorebtn.style.display = 'none';\n        } else if (totalImages >= data.totalHits) {\n            iziToast.info({\n              message: `We're sorry, but you've reached the end of search results.`,\n              position: 'topRight',\n            });\n\n            loadmorebtn.style.display = 'none';\n          } \n          else {\n            loadmorebtn.style.display = 'block';\n          }\n        \n        const pixabay = data.hits.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => \n            `<div class=\"item\">\n            <a href=\"${largeImageURL}\">\n            <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n            />\n            <div class=\"info\">\n            <p class=\"info-item\">\n                <b>Likes <br/> ${likes}</b>\n            </p>\n            <p class=\"info-item\">\n                <b>Views <br/> ${views}</b>\n            </p>\n            <p class=\"info-item\">\n                <b>Comments <br/> ${comments}</b>\n            </p>\n            <p class=\"info-item\">\n                <b>Downloads <br/> ${downloads}</b>\n            </p>\n            </div>\n            </a>\n            </div>`\n        ).join('');\n        \n        gallery.insertAdjacentHTML('beforeend', pixabay);\n        delay(90000);\n        loadingDiv.style.display = 'none';\n        box.refresh();\n\n        }).catch(error => {\n            console.error('Hata oluştu:', error);\n        })\n    });\n  \n\n\n  let box = new SimpleLightbox('.container a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    captionPosition: 'bottom',\n  })\n\n  async function fetch() {\n    try {\n      const response = await axios.get(\"https://pixabay.com/api/\", {\n        params: {\n            key: \"26694191-13f704d2e0e711d67f08fd2b2\",\n            q: inputValue.value,\n            per_page: perPage,\n            page: sayfa,\n            image_type: 'photo',\n            orientation: 'horizontal',\n        }\n      });\n      \n      return response.data;\n      \n    } catch (error) {\n      console.error('Hata oluştu:', error);\n    }\n  }\n\n  function delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nloadmorebtn.addEventListener(\"click\", async () => {\n    sayfa++;\n\n    await fetch().then((data) => {\n        totalImages += data.hits.length;\n\n        if (data.hits.length === 0) {\n            iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: 'topRight',\n            })\n\n            loadmorebtn.style.display = 'none';\n        }\n        else if (totalImages >= data.totalHits) {\n            console.log(\"CSS\",noResults.style.display)\n            iziToast.info({\n              message: `We're sorry, but you've reached the end of search results.`,\n              position: 'topRight',\n            });\n\n            loadmorebtn.style.display = 'none';\n          } \n          else {\n            loadmorebtn.style.display = 'block';\n          }\n        \n        const pixabay = data.hits.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => \n            `<div class=\"item\">\n            <a href=\"${largeImageURL}\">\n            <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n            />\n            <div class=\"info\">\n            <p class=\"info-item\">\n                <b>Likes <br/> ${likes}</b>\n            </p>\n            <p class=\"info-item\">\n                <b>Views <br/> ${views}</b>\n            </p>\n            <p class=\"info-item\">\n                <b>Comments <br/> ${comments}</b>\n            </p>\n            <p class=\"info-item\">\n                <b>Downloads <br/> ${downloads}</b>\n            </p>\n            </div>\n            </a>\n            </div>`\n        ).join('');\n        \n        gallery.insertAdjacentHTML('beforeend', pixabay);\n        delay(90000);\n        loadingDiv.style.display = 'none';\n        box.refresh();\n\n        }).catch(error => {\n            console.error('Hata oluştu:', error);\n        \n    });\n})\n\n"],"names":["gallery","inputValue","searchButton","loadmorebtn","loadingDiv","sayfa","perPage","totalImages","e","delay","fetch","data","iziToast","pixabay","webformatURL","largeImageURL","tags","likes","views","comments","downloads","box","error","SimpleLightbox","axios","ms","resolve"],"mappings":"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"}